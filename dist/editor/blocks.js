(()=>{var e={251:(e,t,o)=>{"use strict";var n=o(196),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var n,l={},c=null,p=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)a.call(t,n)&&!i.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:p,props:l,_owner:s.current}}t.Fragment=l,t.jsx=c,t.jsxs=c},893:(e,t,o)=>{"use strict";e.exports=o(251)},196:e=>{"use strict";e.exports=window.React},967:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,l(o)))}return e}function l(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};o.r(e),o.d(e,{name:()=>z,settings:()=>E});var t={};o.r(t),o.d(t,{name:()=>P,settings:()=>M});var n={};o.r(n),o.d(n,{name:()=>A,settings:()=>N});var r={};o.r(r),o.d(r,{name:()=>G,settings:()=>L});var l={};o.r(l),o.d(l,{name:()=>$,settings:()=>W});const a=window.wp.blocks;var s=o(893);const i=window.wp.i18n,c=window.wp.blockEditor;var p=o(196);const d=window.wp.primitives,u=(0,p.createElement)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,p.createElement)(d.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})),v=window.wp.element,h=window.wp.components,m=window.wp.data;var b=o(967),w=o.n(b);function k(e){const{setAttributes:t,clientId:o}=e,[n,r]=(0,v.useState)(2),[l,a]=(0,v.useState)(2);return(0,s.jsx)(h.Placeholder,{label:(0,i.__)("Table","tp"),icon:(0,s.jsx)(c.BlockIcon,{icon:u,showColors:!0}),instructions:(0,i.__)("Insert a table for sharing data.","tp"),children:(0,s.jsxs)("form",{className:"travelopia-table__placeholder-form",onSubmit:e=>{e.preventDefault(),t({rows:n,columns:l}),F("tbody",o)},children:[(0,s.jsx)(h.TextControl,{type:"number",label:(0,i.__)("Column count","tp"),value:l,onChange:e=>a(parseInt(e)),min:"1",className:"travelopia-table__placeholder-input"}),(0,s.jsx)(h.TextControl,{type:"number",label:(0,i.__)("Row count","tp"),value:n,onChange:e=>r(parseInt(e)),min:"1",className:"travelopia-table__placeholder-input"}),(0,s.jsx)(h.Button,{variant:"primary",type:"submit",children:(0,i.__)("Create Table","tp")})]})})}const f=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84zM6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84z"})),_=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M13.824 10.176h-2.88v-2.88H9.536v2.88h-2.88v1.344h2.88v2.88h1.408v-2.88h2.88zM0 17.92V0h20.48v17.92H0zM6.4 1.28H1.28v3.84H6.4V1.28zm6.4 0H7.68v3.84h5.12V1.28zm6.4 0h-5.12v3.84h5.12V1.28zm0 5.056H1.28v9.024H19.2V6.336z"})),g=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M17.728 11.456L14.592 8.32l3.2-3.2-1.536-1.536-3.2 3.2L9.92 3.648 8.384 5.12l3.2 3.2-3.264 3.264 1.536 1.536 3.264-3.264 3.136 3.136 1.472-1.536zM0 17.92V0h20.48v17.92H0zm19.2-6.4h-.448l-1.28-1.28H19.2V6.4h-1.792l1.28-1.28h.512V1.28H1.28v3.84h6.208l1.28 1.28H1.28v3.84h7.424l-1.28 1.28H1.28v3.84H19.2v-3.84z"})),y=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M6.4 3.776v3.648H2.752v1.792H6.4v3.648h1.728V9.216h3.712V7.424H8.128V3.776zM0 17.92V0h20.48v17.92H0zM12.8 1.28H1.28v14.08H12.8V1.28zm6.4 0h-5.12v3.84h5.12V1.28zm0 5.12h-5.12v3.84h5.12V6.4zm0 5.12h-5.12v3.84h5.12v-3.84z"})),x=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M14.08 12.864V9.216h3.648V7.424H14.08V3.776h-1.728v3.648H8.64v1.792h3.712v3.648zM0 17.92V0h20.48v17.92H0zM6.4 1.28H1.28v3.84H6.4V1.28zm0 5.12H1.28v3.84H6.4V6.4zm0 5.12H1.28v3.84H6.4v-3.84zM19.2 1.28H7.68v14.08H19.2V1.28z"})),B=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(d.Path,{d:"M6.4 9.98L7.68 8.7v-.256L6.4 7.164V9.98zm6.4-1.532l1.28-1.28V9.92L12.8 8.64v-.192zm7.68 9.472V0H0v17.92h20.48zm-1.28-2.56h-5.12v-1.024l-.256.256-1.024-1.024v1.792H7.68v-1.792l-1.024 1.024-.256-.256v1.024H1.28V1.28H6.4v2.368l.704-.704.576.576V1.216h5.12V3.52l.96-.96.32.32V1.216h5.12V15.36zm-5.76-2.112l-3.136-3.136-3.264 3.264-1.536-1.536 3.264-3.264L5.632 5.44l1.536-1.536 3.136 3.136 3.2-3.2 1.536 1.536-3.2 3.2 3.136 3.136-1.536 1.536z"})),I=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(d.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),V=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(d.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})),j=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(d.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})),S=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(d.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})),C=(0,p.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(d.Path,{d:"M4 6v11.5h16V6H4zm1.5 1.5h6V11h-6V7.5zm0 8.5v-3.5h6V16h-6zm13 0H13v-3.5h5.5V16zM13 11V7.5h5.5V11H13z"}));const H=function(e){const{attributes:t,setAttributes:o}=e,n=(0,c.useBlockProps)({className:"travelopia-table__cell"});return(0,s.jsx)(c.RichText,Object.assign({tagName:"span"},n,{placeholder:(0,i.__)("Cell content","tp"),onChange:e=>o({content:e}),value:t.content}))},z="travelopia/table-cell",E={apiVersion:3,icon:u,title:(0,i.__)("Cell","tp"),description:(0,i.__)("Individual cell of the table.","tp"),parent:["travelopia/table-column"],category:"text",keywords:[(0,i.__)("cell","tp")],attributes:{content:{type:"string",source:"html"}},supports:{html:!0,className:!1},transforms:{to:[{type:"block",blocks:["core/heading"],transform:(e,t)=>(0,a.createBlock)("core/heading",Object.assign(Object.assign({},e),{level:"3"}),t)},{type:"block",blocks:["core/paragraph"],transform:(e,t)=>(0,a.createBlock)("core/paragraph",e,t)},{type:"block",blocks:["core/list"],transform:(e,t)=>(0,a.createBlock)("core/list",{},[(0,a.createBlock)("core/list-item",e,t)])}]},edit:H,save:({attributes:e})=>(0,s.jsx)(c.RichText.Content,{value:e.content})};function O({isSelected:e,tableId:t,tableRow:o,tableColumn:n,rowContainerId:r,columnId:l}){const{getBlock:p,canInsertBlockType:d,getBlockAttributes:u,canRemoveBlock:b,getAdjacentBlockClientId:w}=(0,m.select)("core/block-editor"),{removeBlock:k,removeBlocks:H,insertBlock:E,updateBlockAttributes:O,moveBlocksToPosition:T}=(0,m.dispatch)("core/block-editor"),[M,D]=(0,v.useState)(0),N=(0,v.useMemo)((()=>{var e,t;return null===(t=null===(e=p(r))||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.type}),[r,p]);(0,v.useEffect)((()=>{const e=p(t);e?e.innerBlocks.some(((e,t)=>!(e.name!==A||t+1!==o||!e.innerBlocks.length)&&(D(e.innerBlocks.length),!0))):D(0)}),[o,n,p,t]);const R=(e=0)=>{var n,l;const s=p(t);if(!s)return;if(!d(A,r))return;const i=[];for(let e=0;e<(null===(n=s.attributes)||void 0===n?void 0:n.columns);e++)i.push((0,a.createBlock)(P,{},[(0,a.createBlock)(z)]));const c=(0,a.createBlock)(A,{},i);E(c,o+e,r),O(t,{rows:(null===(l=s.attributes)||void 0===l?void 0:l.rows)+1})},L=(e=0)=>{var o;const l=p(t);if(!l)return;p(r)&&(l.innerBlocks.forEach((t=>{t.name===G&&t.innerBlocks.forEach((t=>{if(t.name!==A)return;if(!d(P,t.clientId))return;const o=(0,a.createBlock)(P,{},[(0,a.createBlock)(z)]);E(o,n+e,t.clientId)}))})),O(t,{columns:(null===(o=l.attributes)||void 0===o?void 0:o.columns)+1}))},F=(e,t)=>{var o,n,r,l;const a=u(t.clientId),s=u(e.clientId);if(parseInt(null!==(o=null==a?void 0:a.rowSpan)&&void 0!==o?o:1)!==parseInt(null!==(n=null==s?void 0:s.rowSpan)&&void 0!==n?n:1))return;const i=parseInt(null!==(r=null==a?void 0:a.colSpan)&&void 0!==r?r:1),c=parseInt(null!==(l=null==s?void 0:s.colSpan)&&void 0!==l?l:1);O(t.clientId,{colSpan:i+c}),T(e.innerBlocks.map((e=>e.clientId)),e.clientId,t.clientId),k(e.clientId)},U=(e,t)=>{var o,n,r,l;const a=u(t.clientId),s=u(e.clientId);if(parseInt(null!==(o=null==a?void 0:a.colSpan)&&void 0!==o?o:1)!==parseInt(null!==(n=null==s?void 0:s.colSpan)&&void 0!==n?n:1))return;const i=parseInt(null!==(r=null==a?void 0:a.rowSpan)&&void 0!==r?r:1),c=parseInt(null!==(l=null==s?void 0:s.rowSpan)&&void 0!==l?l:1);O(t.clientId,{rowSpan:i+c}),T(e.innerBlocks.map((e=>e.clientId)),e.clientId,t.clientId),k(e.clientId)},Y=[{icon:f,title:(0,i.__)("Insert row before","tp"),isDisabled:!e||"tfoot"===N||"thead"===N,onClick:()=>R(-1)},{icon:_,title:(0,i.__)("Insert row after","tp"),isDisabled:!e||"tfoot"===N||"thead"===N,onClick:R},{icon:g,title:(0,i.__)("Delete row","tp"),isDisabled:!e||"tfoot"===N||"thead"===N,onClick:()=>{var e;const n=p(t);if(!n)return;const l=p(r);if(!l)return;const a=l.innerBlocks[o-1];(null==a?void 0:a.clientId)&&b(a.clientId)&&(k(a.clientId),O(t,{rows:(null===(e=n.attributes)||void 0===e?void 0:e.rows)-1}))}},{icon:y,title:(0,i.__)("Insert column before","tp"),isDisabled:!e,onClick:()=>L(-1)},{icon:x,title:(0,i.__)("Insert column after","tp"),isDisabled:!e,onClick:L},{icon:B,title:(0,i.__)("Delete column","tp"),isDisabled:!e,onClick:()=>{var e;const o=p(t);if(!o)return;const r=[];o.innerBlocks.forEach((e=>{e.name===G&&e.innerBlocks.forEach((e=>{if(e.name!==A)return;const t=e.innerBlocks[n-1];(null==t?void 0:t.clientId)&&b(t.clientId)&&r.push(t.clientId)}))})),H(r),O(t,{columns:(null===(e=o.attributes)||void 0===e?void 0:e.columns)-1})}},{icon:I,title:(0,i.__)("Merge column left","tp"),isDisabled:n<2,onClick:()=>{if(!p(t))return;const e=p(l);if(!e)return;const o=w(l,-1);if(!o)return;const n=p(o);n&&F(e,n)}},{icon:V,title:(0,i.__)("Merge column right","tp"),isDisabled:n===M,onClick:()=>{if(!p(t))return;const e=p(l);if(!e)return;const o=w(l,1);if(!o)return;const n=p(o);n&&F(n,e)}},{icon:j,title:(0,i.__)("Merge column up","tp"),isDisabled:o<2||"tfoot"===N||"thead"===N,onClick:()=>{const e=p(t);if(!e)return;const l=p(r);if(!l)return;let a,s;e.innerBlocks.some((e=>{var t;if(e.name!==G)return!1;const r=u(e.clientId);return(null==r?void 0:r.type)===(null===(t=null==l?void 0:l.attributes)||void 0===t?void 0:t.type)&&e.innerBlocks.some(((e,t)=>{const r=t+1;return!(e.name!==A||r!==o&&r!==o-1||!e.innerBlocks.length)&&(e.innerBlocks.some(((e,t)=>{const l=t+1;return l===n&&r===o?s=e:l===n&&r===o-1&&(a=e),!(!a||!s)})),!(!s||!a)&&(U(s,a),!0))}))}))}},{icon:S,title:(0,i.__)("Merge column down","tp"),isDisabled:"tfoot"===N||"thead"===N,onClick:()=>{const e=p(t);if(!e)return;const l=p(r);if(!l)return;let a,s;e.innerBlocks.some((e=>{var t;if(e.name!==G)return!1;const r=u(e.clientId);return(null==r?void 0:r.type)===(null===(t=null==l?void 0:l.attributes)||void 0===t?void 0:t.type)&&e.innerBlocks.some(((e,t)=>{const r=t+1;return!(e.name!==A||r!==o&&r!==o+1||!e.innerBlocks.length)&&(e.innerBlocks.some(((e,t)=>{const l=t+1;return l===n&&r===o?a=e:l===n&&r===o+1&&(s=e),!(!a||!s)})),!(!s||!a)&&(U(s,a),!0))}))}))}}];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.BlockControls,{group:"other",children:(0,s.jsx)(h.ToolbarDropdownMenu,{icon:C,label:(0,i.__)("Edit table","tp"),controls:Y})})})}const T=function({className:e,clientId:t,attributes:o,setAttributes:n,isSelected:r,context:l}){const a=(0,c.useBlockProps)({className:w()(e,"travelopia-table__column",{"travelopia-table__column--sticky":o.isSticky})}),p=l["travelopia/table-id"],d=l["travelopia/table-row-container-type"],u=l["travelopia/table-row-container-id"],b=(0,c.useInnerBlocksProps)(Object.assign(Object.assign({},a),{colSpan:o.colSpan,rowSpan:o.rowSpan}),{template:[[z]],templateLock:!1}),{row:k,column:f}=(0,m.useSelect)((e=>{const o=e(c.store).getBlockIndex(t),n=e(c.store).getBlockRootClientId(t);return{row:e(c.store).getBlockIndex(n)+1,column:o+1}}),[t]);(0,v.useEffect)((()=>{n({row:k,column:f})}),[k,f,n]),(0,v.useEffect)((()=>{n({blockId:t})}),[t,n]);let _="td";return"tbody"!==d&&(_="th"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.InspectorControls,{children:(0,s.jsx)(h.PanelBody,{title:(0,i.__)("Column Options","tp"),children:(0,s.jsx)(h.ToggleControl,{label:(0,i.__)("Is Sticky","tp"),checked:o.isSticky,onChange:e=>n({isSticky:e}),help:(0,i.__)("Is this column sticky?","tp")})})}),(0,s.jsx)(O,{isSelected:r,tableRow:k,tableColumn:f,tableId:p,rowContainerId:u,columnId:t}),(0,s.jsx)(_,Object.assign({},b))]})},P="travelopia/table-column",M={apiVersion:3,icon:u,title:(0,i.__)("Column","tp"),description:(0,i.__)("Individual column of the table.","tp"),parent:["travelopia/table-row"],category:"text",keywords:[(0,i.__)("column","tp")],attributes:{row:{type:"number"},column:{type:"number"},colSpan:{type:"number"},rowSpan:{type:"number"},isSticky:{type:"boolean"},blockId:{type:"string"}},providesContext:{"travelopia/table-row":"row","travelopia/table-column":"column","travelopia/table-column-id":"blockId"},usesContext:["travelopia/table-row-container-type","travelopia/table-row-container-id"],supports:{html:!0,color:{text:!0,background:!0},align:["left","center","right"],__experimentalBorder:{color:!0,style:!0,width:!0,__experimentalDefaultControls:{color:!0,style:!0,width:!0}}},edit:T,save:()=>(0,s.jsx)(c.InnerBlocks.Content,{})};const D=function(e){const{className:t,clientId:o,setAttributes:n}=e,r=(0,c.useBlockProps)({className:w()(t,"travelopia-table__row")}),l=(0,c.useInnerBlocksProps)(Object.assign({},r),{allowedBlocks:[P],templateLock:!1});return(0,v.useEffect)((()=>{n({blockId:o})}),[o,n]),(0,s.jsx)("tr",Object.assign({},l))},A="travelopia/table-row",N={apiVersion:3,icon:u,title:(0,i.__)("Row","tp"),description:(0,i.__)("Individual row of the table.","tp"),parent:["travelopia/table-row-container"],category:"text",keywords:[(0,i.__)("row","tp")],attributes:{blockId:{type:"string"}},usesContext:["travelopia/table-row-container-type"],supports:{html:!0,color:{text:!0,background:!0},__experimentalBorder:{color:!0,style:!0,width:!0,__experimentalDefaultControls:{color:!0,style:!0,width:!0}}},edit:D,save:()=>(0,s.jsx)(c.InnerBlocks.Content,{})};const R=function(e){const{className:t,attributes:o,setAttributes:n,clientId:r}=e,l=(0,c.useBlockProps)({className:w()(t,"travelopia-table__row-container",{"travelopia-table__row-container--sticky":o.isSticky})}),a=(0,c.useInnerBlocksProps)(Object.assign({},l),{allowedBlocks:[A]}),p=o.type;return(0,v.useEffect)((()=>{n({blockId:r})}),[r,n]),(0,s.jsxs)(s.Fragment,{children:["thead"===o.type&&(0,s.jsx)(c.InspectorControls,{children:(0,s.jsx)(h.PanelBody,{title:(0,i.__)("Row Container Options","tp"),children:(0,s.jsx)(h.ToggleControl,{label:(0,i.__)("Is Sticky vertically","tp"),checked:o.isSticky,onChange:e=>n({isSticky:e}),help:(0,i.__)("Is this container sticky?","tp")})})}),(0,s.jsx)(p,Object.assign({},a))]})},G="travelopia/table-row-container",L={apiVersion:3,icon:u,title:(0,i.__)("Row Container","tp"),description:(0,i.__)("A container for a row (THEAD, TBODY, TFOOT).","tp"),parent:["travelopia/table"],category:"text",keywords:[(0,i.__)("thead","tp"),(0,i.__)("tbody","tp"),(0,i.__)("tfoot","tp")],attributes:{type:{type:"string",default:"tbody"},isSticky:{type:"boolean",default:!1},blockId:{type:"string"}},providesContext:{"travelopia/table-row-container-type":"type","travelopia/table-row-container-sticky":"isSticky","travelopia/table-row-container-id":"blockId"},supports:{html:!1},edit:R,save:()=>(0,s.jsx)(c.InnerBlocks.Content,{})},F=(e="tbody",t="")=>{const o=(0,m.select)("core/block-editor").getBlock(t);if(!o)return;const n=(0,a.createBlock)(G,{type:e});let r=o.attributes.rows;"tbody"!==e&&(r=1);for(let e=0;e<r;e++){const e=[];for(let t=0;t<o.attributes.columns;t++)e.push((0,a.createBlock)(P,{},[(0,a.createBlock)(z)]));n.innerBlocks.push((0,a.createBlock)(A,{},e))}if("tbody"===e)(0,m.dispatch)("core/block-editor").replaceInnerBlocks(t,[n]);else{const r="thead"===e?0:o.innerBlocks.length;(0,m.dispatch)("core/block-editor").insertBlock(n,r,t)}},U=(e="thead",t="")=>{const o=(0,m.select)("core/block-editor").getBlock(t);o&&o.innerBlocks.length&&o.innerBlocks.forEach((t=>{var o;(null===(o=t.attributes)||void 0===o?void 0:o.type)===e&&(0,m.dispatch)("core/block-editor").removeBlock(t.clientId)}))};const Y=function(e){const{className:t,attributes:o,clientId:n,setAttributes:r}=e,l=(0,c.useBlockProps)({className:w()(t,"travelopia-table")}),a=(0,c.useInnerBlocksProps)({},{allowedBlocks:[G],renderAppender:void 0});return(0,v.useEffect)((()=>{r({blockId:n})}),[n,r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.InspectorControls,{children:(0,s.jsxs)(h.PanelBody,{title:(0,i.__)("Table Options","tp"),children:[(0,s.jsx)(h.ToggleControl,{label:(0,i.__)("Has THEAD","tp"),checked:o.hasThead,onChange:e=>{e?F("thead",n):U("thead",n),r({hasThead:e})},help:(0,i.__)("Does this table have a header?","tp")}),(0,s.jsx)(h.ToggleControl,{label:(0,i.__)("Has TFOOT","tp"),checked:o.hasTfoot,onChange:e=>{e?F("tfoot",n):U("tfoot",n),r({hasTfoot:e})},help:(0,i.__)("Does this table have a footer?","tp")})]})}),(0,s.jsxs)("figure",Object.assign({},l,{children:[(0===o.rows||0===o.columns)&&(0,s.jsx)(k,Object.assign({},e)),(0!==o.rows||0!==o.columns)&&(0,s.jsx)("table",Object.assign({},a))]}))]})},$="travelopia/table",W={apiVersion:3,icon:u,title:(0,i.__)("Table","tp"),description:(0,i.__)("Create structured content in rows and columns to display information.","tp"),category:"text",keywords:[(0,i.__)("table","tp")],attributes:{anchor:{type:"string"},rows:{type:"number",default:0},columns:{type:"number",default:0},blockId:{type:"string"},hasThead:{type:"boolean",default:!1},hasTfoot:{type:"boolean",default:!1}},providesContext:{"travelopia/table-id":"blockId","travelopia/table-total-rows":"rows","travelopia/table-total-columns":"columns","travelopia/table-has-thead":"hasThead","travelopia/table-has-tfoot":"hasTfoot"},supports:{anchor:!0},edit:Y,save:()=>(0,s.jsx)(c.InnerBlocks.Content,{})},q=window.wp.hooks;(0,q.addFilter)("blocks.registerBlockType","travelopia/table-row-column-context",(e=>{const t=["travelopia/table-row","travelopia/table-column","travelopia/table-id","travelopia/table-row-container-id","travelopia/table-column-id"];return e.usesContext&&Array.isArray(e.usesContext)&&t.forEach((t=>{var o,n;(null===(o=e.usesContext)||void 0===o?void 0:o.includes(t))||null===(n=e.usesContext)||void 0===n||n.push(t)})),e})),(0,q.addFilter)("editor.BlockEdit","travelopia/table-toolbar",(e=>t=>{const{context:o,isSelected:n}=t;if(!o)return(0,s.jsx)(e,Object.assign({},t));const r=o["travelopia/table-row"],l=o["travelopia/table-column"],a=o["travelopia/table-id"],i=o["travelopia/table-row-container-id"],c=o["travelopia/table-column-id"];return!r||!l||!a||l<1||r<1?(0,s.jsx)(e,Object.assign({},t)):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O,{isSelected:n,tableRow:r,tableColumn:l,tableId:a,rowContainerId:i,columnId:c}),(0,s.jsx)(e,Object.assign({},t))]})}));[l,r,n,t,e].forEach((({name:e,settings:t})=>(0,a.registerBlockType)(e,t)))})()})();